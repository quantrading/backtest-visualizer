(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1381:function(e,t,a){},1383:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(11),o=a.n(i),l=a(49),c=a(15),u=a(18),s=a(24),d=a(23),h=a(25),m=a(85),f={},g=a(1393),v=a(1392),p=a(1394),y=a(490),b=function(){return r.a.createElement("h1",null,"Not found")},k=a(74),E=a(160),O=a(491),D=a(493),S=a(64),L={globalVariables:{__typename:"GlobalVariables",startDate:"20170502",endDate:"20171031",selectedCode:"069500",codeList:["069500","232080","143850"],selectedAllocation:[]},correlationPage:{__typename:"CorrelationPage",one:"069500",another:"232080",rolling:null,baseDate:null},assetAllocationPage:{__typename:"AssetAllocationPage",weightLimit:{__typename:"weightLimit","069500":{__typename:"weightRange",minWeight:0,maxWeight:100},232080:{__typename:"weightRange",minWeight:0,maxWeight:100},143850:{__typename:"weightRange",minWeight:0,maxWeight:100},195930:{__typename:"weightRange",minWeight:0,maxWeight:100},238720:{__typename:"weightRange",minWeight:0,maxWeight:100},192090:{__typename:"weightRange",minWeight:0,maxWeight:100},148070:{__typename:"weightRange",minWeight:0,maxWeight:100},136340:{__typename:"weightRange",minWeight:0,maxWeight:100},182490:{__typename:"weightRange",minWeight:0,maxWeight:100},132030:{__typename:"weightRange",minWeight:0,maxWeight:100},130680:{__typename:"weightRange",minWeight:0,maxWeight:100},114800:{__typename:"weightRange",minWeight:0,maxWeight:100},138230:{__typename:"weightRange",minWeight:0,maxWeight:100},139660:{__typename:"weightRange",minWeight:0,maxWeight:100},130730:{__typename:"weightRange",minWeight:0,maxWeight:100}}},notes:[{__typename:"Note",id:1,title:"First",content:"Second"}],simulation:[{__typename:"Simulation",id:0,startDate:null,endDate:null}]},A=a(70),C=a(39),j=a(98),x=a.n(j);function w(){var e=Object(l.a)(["\n  fragment SimulationParts on Simulation {\n    startDate\n    endDate\n  }\n"]);return w=function(){return e},e}function W(){var e=Object(l.a)(["\n  fragment NotePars on Note {\n    id\n    title\n    content\n  }\n"]);return W=function(){return e},e}var R=x()(W()),P=x()(w());function M(){var e=Object(l.a)(["\n  {\n    priceList @client {\n      code\n      closePrice\n    }\n  }\n"]);return M=function(){return e},e}function _(){var e=Object(l.a)(["\n  {\n    simulation @client {\n      startDate\n      endDate\n    }\n  }\n"]);return _=function(){return e},e}function I(){var e=Object(l.a)(["\n  {\n    notes @client {\n      id\n      title\n      content\n    }\n  }\n"]);return I=function(){return e},e}function T(){var e=Object(l.a)(["\n  {\n    assetAllocationPage @client {\n      weightLimit\n    }\n  }\n"]);return T=function(){return e},e}function V(){var e=Object(l.a)(["\n  {\n    correlationPage @client {\n      one\n      another\n      rolling\n      baseDate\n    }\n  }\n"]);return V=function(){return e},e}function N(){var e=Object(l.a)(["\n  {\n    globalVariables @client {\n      startDate\n      endDate\n      codeList\n      selectedCode\n      selectedAllocation\n    }\n  }\n"]);return N=function(){return e},e}var F=x()(N()),z=(x()(V()),x()(T()),x()(I())),H=(x()(_()),x()(M()),{Query:{note:function(e,t,a){var n=a.cache,r=n.config.dataIdFromObject({__typename:"Note",id:t.id}),i=n.readFragment({fragment:R,id:r});return i},simulation:function(e,t,a){var n=a.cache.readFragment({fragment:P,id:0});return console.log("simulation"),console.log(n),n}},Mutation:{createNote:function(e,t,a){var n=a.cache,r=n.readQuery({query:z}).notes,i={__typename:"Note",title:t.title,content:t.content,id:r.length+1};return n.writeData({data:{notes:[i].concat(Object(C.a)(r))}}),i},editNote:function(e,t,a){var n=t.id,r=t.title,i=t.content,o=a.cache,l=o.config.dataIdFromObject({__typename:"Note",id:n}),c=o.readFragment({fragment:R,id:l}),u=Object(A.a)({},c,{title:r,content:i});return o.writeFragment({id:l,fragment:R,data:u}),u}}}),G=new O.a,K=Object(D.a)({cache:G,typeDefs:"\n    schema {\n        query: Query\n        mutation: Mutation\n    }\n    type Query {\n        notes: [Note]!\n        note(id: Int!): Note\n        simulation: Simulation\n        globalVariables: GlobalVariables\n    }\n    type Mutation{\n        createNote(title: String!, content: String!): Note\n        editNote(id: Int!, title: String, content:String): Note\n    }\n    type Note{\n        id: Int!\n        title: Stirng!\n        content: String!\n    }\n\n    type Simulation{\n        id: Int\n        startDate: String\n        endDate: String\n    }\n\n    GlobalVariables{\n        startDate: String\n        endDate: String\n        codeList: [String]\n        selectedAllocation: []\n    }\n\n    correlationPage: {\n        one: String,\n        another: String,\n        rolling: Int,\n        baseDate: String\n    }\n\n    assetAllocationPage: {\n        weightLimit: Object\n    }\n\n    ",defaults:L,resolvers:H}),Y=new E.a({cache:G,link:S.a.from([K])});Y.initQueryManager();var B=Y,q=(a(508),a(509),a(78)),U=a(16),X=["20160303","20160304","20160307","20160308","20160309","20160310","20160311","20160314","20160315","20160316","20160317","20160318","20160321","20160322","20160323","20160324","20160325","20160328","20160329","20160330","20160331","20160401","20160404","20160405","20160406","20160407","20160408","20160411","20160412","20160414","20160415","20160418","20160419","20160420","20160421","20160422","20160425","20160426","20160427","20160428","20160429","20160502","20160503","20160504","20160509","20160510","20160511","20160512","20160513","20160516","20160517","20160518","20160519","20160520","20160523","20160524","20160525","20160526","20160527","20160530","20160531","20160601","20160602","20160603","20160607","20160608","20160609","20160610","20160613","20160614","20160615","20160616","20160617","20160620","20160621","20160622","20160623","20160624","20160627","20160628","20160629","20160630","20160701","20160704","20160705","20160706","20160707","20160708","20160711","20160712","20160713","20160714","20160715","20160718","20160719","20160720","20160721","20160722","20160725","20160726","20160727","20160728","20160729","20160801","20160802","20160803","20160804","20160805","20160808","20160809","20160810","20160811","20160812","20160816","20160817","20160818","20160819","20160822","20160823","20160824","20160825","20160826","20160829","20160830","20160831","20160901","20160902","20160905","20160906","20160907","20160908","20160909","20160912","20160913","20160919","20160920","20160921","20160922","20160923","20160926","20160927","20160928","20160929","20160930","20161004","20161005","20161006","20161007","20161010","20161011","20161012","20161013","20161014","20161017","20161018","20161019","20161020","20161021","20161024","20161025","20161026","20161027","20161028","20161031","20161101","20161102","20161103","20161104","20161107","20161108","20161109","20161110","20161111","20161114","20161115","20161116","20161117","20161118","20161121","20161122","20161123","20161124","20161125","20161128","20161129","20161130","20161201","20161202","20161205","20161206","20161207","20161208","20161209","20161212","20161213","20161214","20161215","20161216","20161219","20161220","20161221","20161222","20161223","20161226","20161227","20161228","20161229","20170102","20170103","20170104","20170105","20170106","20170109","20170110","20170111","20170112","20170113","20170116","20170117","20170118","20170119","20170120","20170123","20170124","20170125","20170126","20170131","20170201","20170202","20170203","20170206","20170207","20170208","20170209","20170210","20170213","20170214","20170215","20170216","20170217","20170220","20170221","20170222","20170223","20170224","20170227","20170228","20170302","20170303","20170306","20170307","20170308","20170309","20170310","20170313","20170314","20170315","20170316","20170317","20170320","20170321","20170322","20170323","20170324","20170327","20170328","20170329","20170330","20170331","20170403","20170404","20170405","20170406","20170407","20170410","20170411","20170412","20170413","20170414","20170417","20170418","20170419","20170420","20170421","20170424","20170425","20170426","20170427","20170428","20170502","20170504","20170508","20170510","20170511","20170512","20170515","20170516","20170517","20170518","20170519","20170522","20170523","20170524","20170525","20170526","20170529","20170530","20170531","20170601","20170602","20170605","20170607","20170608","20170609","20170612","20170613","20170614","20170615","20170616","20170619","20170620","20170621","20170622","20170623","20170626","20170627","20170628","20170629","20170630","20170703","20170704","20170705","20170706","20170707","20170710","20170711","20170712","20170713","20170714","20170717","20170718","20170719","20170720","20170721","20170724","20170725","20170726","20170727","20170728","20170731","20170801","20170802","20170803","20170804","20170807","20170808","20170809","20170810","20170811","20170814","20170816","20170817","20170818","20170821","20170822","20170823","20170824","20170825","20170828","20170829","20170830","20170831","20170901","20170904","20170905","20170906","20170907","20170908","20170911","20170912","20170913","20170914","20170915","20170918","20170919","20170920","20170921","20170922","20170925","20170926","20170927","20170928","20170929","20171010","20171011","20171012","20171013","20171016","20171017","20171018","20171019","20171020","20171023","20171024","20171025","20171026","20171027","20171030","20171031","20171101","20171102","20171103","20171106","20171107","20171108","20171109","20171110","20171113","20171114","20171115","20171116","20171117","20171120","20171121","20171122","20171123","20171124","20171127","20171128","20171129","20171130","20171201","20171204","20171205","20171206","20171207","20171208","20171211","20171212","20171213","20171214","20171215","20171218","20171219","20171220","20171221","20171222","20171226","20171227","20171228","20180102","20180103","20180104","20180105","20180108","20180109","20180110","20180111","20180112","20180115","20180116","20180117","20180118","20180119","20180122","20180123","20180124","20180125","20180126","20180129","20180130","20180131","20180201","20180202","20180205","20180206","20180207","20180208","20180209","20180212","20180213","20180214","20180219","20180220","20180221","20180222","20180223","20180226","20180227","20180228","20180302","20180305","20180306","20180307","20180308","20180309","20180312","20180313","20180314","20180315","20180316","20180319","20180320","20180321","20180322","20180323","20180326","20180327","20180328","20180329","20180330","20180402","20180403","20180404","20180405","20180406","20180409","20180410","20180411","20180412","20180413","20180416","20180417","20180418","20180419","20180420","20180423","20180424","20180425","20180426","20180427","20180430","20180502","20180503","20180504","20180508","20180509","20180510","20180511","20180514","20180515","20180516","20180517","20180518","20180521","20180523","20180524","20180525","20180528","20180529","20180530","20180531","20180601","20180604","20180605","20180607","20180608","20180611","20180612","20180614","20180615","20180618","20180619","20180620","20180621","20180622","20180625","20180626","20180627","20180628","20180629","20180702","20180703","20180704","20180705","20180706","20180709","20180710","20180711","20180712","20180713","20180716","20180717","20180718","20180719","20180720","20180723","20180724","20180725","20180726","20180727","20180730","20180731","20180801","20180802","20180803","20180806","20180807","20180808","20180809","20180810","20180813","20180814","20180816","20180817","20180820","20180821","20180822","20180823","20180824","20180827","20180828","20180829","20180830","20180831","20180903","20180904","20180905","20180906","20180907","20180910","20180911","20180912","20180913","20180914","20180917","20180918","20180919","20180920","20180921","20180927","20180928","20181001","20181002","20181004","20181005","20181008","20181010","20181011","20181012","20181015","20181016","20181017","20181018","20181019","20181022","20181023","20181024","20181025","20181026","20181029","20181030","20181031","20181101","20181102","20181105","20181106","20181107","20181108","20181109","20181112","20181113","20181114","20181115","20181116","20181119","20181120","20181121","20181122","20181123","20181126","20181127","20181128","20181129","20181130","20181203","20181204","20181205","20181206","20181207","20181210","20181211","20181212","20181213","20181214","20181217","20181218","20181219","20181220","20181221","20181224","20181226","20181227","20181228","20190102","20190103","20190104","20190107","20190108","20190109","20190110","20190111","20190114","20190115","20190116","20190117","20190118","20190121","20190122","20190123","20190124","20190125","20190128","20190129","20190130","20190131","20190201","20190207","20190208","20190211","20190212","20190213","20190214","20190215","20190218","20190219","20190220","20190221","20190222","20190225","20190226","20190227","20190228","20190304","20190305","20190306","20190307","20190308","20190311","20190312","20190313","20190314","20190315","20190318","20190319","20190320","20190321","20190322","20190325","20190326","20190327","20190328","20190329","20190401","20190402","20190403","20190404","20190405","20190408","20190409","20190410","20190411","20190412","20190415","20190416","20190417","20190418","20190419","20190422","20190423","20190424","20190425","20190426","20190429","20190430","20190502","20190503","20190507","20190508","20190509","20190510","20190513","20190514","20190515","20190516","20190517","20190520","20190521","20190522","20190523","20190524","20190527","20190528","20190529","20190530","20190603","20190604","20190605","20190606","20190607","20190610","20190611","20190612","20190613","20190614","20190617","20190618","20190619","20190620","20190621","20190624","20190625","20190626","20190627","20190628","20190701","20190702","20190703","20190704","20190705","20190708","20190709","20190710","20190711","20190712","20190715","20190716","20190717","20190718","20190719","20190722","20190723","20190724","20190725","20190726","20190729","20190730","20190731","20190801","20190802","20190805","20190806","20190807","20190808","20190809","20190812","20190813","20190814","20190815","20190816","20190819","20190820","20190821","20190822","20190823","20190826","20190827","20190828","20190829","20190830","20190902","20190903","20190904","20190905","20190906"],Q=["069500","232080","143850","195930","238720","192090","148070","136340","182490","132030","130680","114800","138230","139660","130730","WORLD_STOCK"],J=["KODEX200","TIGER\ucf54\uc2a4\ub2e5150","TIGER\ubbf8\uad6dS&P500\uc120\ubb3c(H)","TIGER\uc720\ub85c\uc2a4\ud0c1\uc2a450(\ud569\uc131H)","KINDEX\uc77c\ubcf8Nikkei225(H)","TIGER\ucc28\uc774\ub098CSI300","KOSEF\uad6d\uace0\ucc4410\ub144","KBSTAR\uc911\uae30\uc6b0\ub7c9\ud68c\uc0ac\ucc44","TIGER\ub2e8\uae30\uc120\uc9c4\ud558\uc774\uc77c\ub4dc(\ud569\uc131H)","KODEX\uace8\ub4dc\uc120\ubb3c(H)","TIGER\uc6d0\uc720\uc120\ubb3cEnhanced(H)","KODEX\uc778\ubc84\uc2a4","KOSEF\ubbf8\uad6d\ub2ec\ub7ec\uc120\ubb3c","KOSEF\ubbf8\uad6d\ub2ec\ub7ec\uc120\ubb3c\uc778\ubc84\uc2a4","KOSEF\ub2e8\uae30\uc790\uae08","\uc138\uacc4\uc885\ud569\uc8fc\uac00\uc9c0\uc218"],Z=["\ucf54\uc2a4\ud53c","\ucf54\uc2a4\ub2e5","S&P500","\uc720\ub85c\uc2a4\ud0c1\uc2a4","Nikkei225","CSI300","\uad6d\uace0\ucc4410\ub144","\uc911\uae30\ud68c\uc0ac\ucc44","\ud558\uc774\uc77c\ub4dc","\uace8\ub4dc","\uc6d0\uc720","\uc778\ubc84\uc2a4","\ub2ec\ub7ec","\ub2ec\ub7ec\uc778\ubc84\uc2a4","\ub2e8\uae30\uc790\uae08","\uc138\uacc4\uc8fc\uac00\uc9c0\uc218"],$=function(e){var t=Q.indexOf(e);return J[t]},ee=function(e){var t=Q.indexOf(e);return Z[t]},te=a(19),ae=a(136),ne=function(e){for(var t=[],a=0;a<e;a++)t.push(Math.random());var n=te.sum(t);return t=t.map(function(e){return e/n*100})},re=function(e){var t=new Date;return t.setTime(e.getTime()+864e5),t},ie=function(e,t){var a=t/252;return Math.pow(1+e,1/a)-1},oe=function(e){return e*Math.pow(252,.5)},le=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e.slice().sort(function(e,a){return t?a-e:e-a});return e.slice().map(function(e){return a.indexOf(e)+1})},ce=X,ue=function e(t){Object(c.a)(this,e),this.addOneDay=function(){},this.date=t};ue.getDateList=function(e,t){var a=ue.magnet(e,!0),n=ue.magnet(t,!1),r=ce.indexOf(a),i=ce.indexOf(n);return ce.slice(r,i+1)},ue.getNonTradingDateList=function(e,t){console.log("getNonTradingDateList")},ue.magnet=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=U(e).format("YYYYMMDD");if(-1!==ce.indexOf(a))return a;for(var n=null,r=0;r<ce.length;r++)if(ce[r]>a){n=r;break}return t?ce[n]:ce[n-1]};var se=ue,de=[],he=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"20191231",t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=U(t?"20160104":"20160108","YYYYMMDD"),n=[];;){var r=a.add(7,"days").format("YYYYMMDD");if(r>e)break;n.push(se.magnet(r,!0))}var i=new Set(n);return Object(C.a)(i)}();de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"201602",a=[];return e.forEach(function(e){var n=e.slice(0,6);n>t&&(a.push(e),t=n)}),a}(X);var me={};Q.forEach(function(e){me[e]={close_price:{}}});q.b("/adjusted_price.csv").then(function(e){!function(e){e.forEach(function(e){var t=e.date;Q.forEach(function(a){var n=parseFloat(e[a]);me[a].close_price[t]=n})})}(e)});for(var fe=function(){function e(t){Object(c.a)(this,e),this.date=t}return Object(u.a)(e,[{key:"setDate",value:function(e){this.date=e}},{key:"getCurrentDate",value:function(){return this.date}},{key:"getPrice",value:function(e){return me[e].close_price[this.date]}},{key:"getPriceList",value:function(e){return me[e].close_price}},{key:"getPctChange",value:function(e){var t=this.getPriceList(e),a=Object.keys(t),n=Object.values(t),r=[];n.map(function(e,t){if(0===t)return null;var a=n[t-1],i=(e-a)/a*100;return r.push(i),null});var i={};return i.dateList=a.slice(1),i.pctChange=r,i}},{key:"getCumPctChange",value:function(e){var t=this.getPriceList(e),a=Object.keys(t),n=Object.values(t),r=[],i=n[0];n.map(function(e){var t=(e-i)/i*100;return r.push(t),null});var o={};return o.dateList=a.slice(1),o.pctChange=r,o}},{key:"getPriceListInRange",value:function(e,t,a){var n=this.getPriceList(e),r=Object.values(n),i=Object.keys(n),o=i.indexOf(t),l=i.indexOf(a);return r.slice(o,l+1)}},{key:"getHistoricalPriceListFromDate",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,n=this.getPriceList(e),r=Object.values(n),i=Object.keys(n).indexOf(t),o=i-a+1;return o<0&&(o=0),r.slice(o,i+1)}},{key:"getHistoricalReturnsFromDate",value:function(e,t,a){var n=this.getHistoricalPriceListFromDate(e,t,a),r=[];return n.map(function(e,t){if(0===t)return null;var a=n[t-1],i=(e-a)/a*100;return r.push(i),null}),r}},{key:"getReturnsListInRange",value:function(e,t,a){var n=this.getPriceListInRange(e,t,a),r=[];return n.map(function(e,t){if(0===t)return null;var a=n[t-1],i=(e-a)/a*100;return r.push(i),null}),r}},{key:"getCumPctChangeInRange",value:function(e,t,a){var n=this.getPriceList(e),r=Object.values(n),i=Object.keys(n),o=i.indexOf(t),l=i.indexOf(a),c=r.slice(o,l+1),u=[],s=c[0];c.map(function(e){var t=(e-s)/s*100;return u.push(t),null});var d={};return d.dateList=i.slice(o,l+1),d.pctChange=u,d}}],[{key:"getPrice",value:function(e,t){return me[e].close_price[t]}},{key:"getMonthlyPriceList",value:function(e){return de.map(function(t){return me[e].close_price[t]})}},{key:"getMonthlyPriceListInRange",value:function(e,t,a){var n=this.getMonthlyPriceList(e),r=de.indexOf(t),i=de.indexOf(a);return n.slice(r,i+1)}},{key:"getMonthlyReturns",value:function(t){var a=e.getMonthlyPriceList(t),n=[];return a.forEach(function(e,t){if(0!==t){var r=a[t-1],i=(e-r)/r*100;n.push(i)}}),n}},{key:"getMonthlyReturnsInRange",value:function(t,a,n){var r=e.getMonthlyPriceListInRange(t,a,n),i=[];return r.forEach(function(e,t){if(0!==t){var a=r[t-1],n=(e-a)/a*100;i.push(n)}}),i}}]),e}(),ge=a(238),ve=a(94),pe=a.n(ve),ye=a(83),be=function(){return"rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")"},ke=function(){for(var e=Object(C.a)(ye.a),t=0;t<10;t++)e.push(be());return e}(),Ee=new fe("20161207"),Oe=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"chart__container"},r.a.createElement("canvas",{id:"cursor",width:"800",height:"450"}),r.a.createElement("canvas",{id:"line-chart",width:"800",height:"450"}))}},{key:"componentDidUpdate",value:function(){this.chartUpdate()}},{key:"chartUpdate",value:function(){for(var e=this.props.data.globalVariables,t=e.startDate,a=e.endDate,n=e.codeList,r=[],i=0;i<n.length;i++){var o=Ee.getCumPctChangeInRange(n[i],t,a),l={};l.data=o,l.label=n[i],r.push(l)}var c=Ee.getCumPctChangeInRange("232080",t,a).dateList,u=this.chart.data.datasets.map(function(e){return e.borderColor}),s=[];r.map(function(e,t){var a=be(),n={label:e.label,backgroundColor:u[t]?u[t]:a,borderColor:u[t]?u[t]:a,data:e.data.pctChange.map(function(e){return te.round(e,2)}),fill:!1};return s.push(n),null});var d={labels:c,datasets:s};this.chart.data=d,this.chart.update()}},{key:"componentDidMount",value:function(){for(var e=this.props.data.globalVariables,t=e.startDate,a=e.endDate,n=e.codeList,r=[],i=0;i<n.length;i++){var o=Ee.getCumPctChangeInRange(n[i],t,a),l={};l.data=o,l.label=n[i],r.push(l)}var c=Ee.getCumPctChangeInRange("232080",t,a).dateList;this._create_chart(r,c)}},{key:"_create_chart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];e.map(function(e,t){var n=t<10?ye.a[t]:be(),r={label:e.label,backgroundColor:n,borderColor:n,data:e.data.pctChange.map(function(e){return te.round(e,2)}),fill:!1};return a.push(r),null});var n={type:"line",data:{labels:t,datasets:a},options:{responsive:!0,tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},onHover:function(e){var t=ge("#cursor"),a=t.offset().left,n=t.get(0),r=parseInt(e.clientX-a),i=t.get(0).getContext("2d");i.clearRect(0,0,n.width,n.height),i.beginPath(),i.moveTo(r,0),i.lineTo(r,n.height),i.setLineDash([10,10]),i.strokeStyle="#333",i.stroke()},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Return(%)"}}]}}};this.chart=new pe.a(document.getElementById("line-chart"),n)}}]),t}(r.a.Component),De=a(1389),Se=a(120),Le=a(471),Ae=a.n(Le),Ce=(r.a.Component,De.a.RangePicker),je="YYYYMMDD",xe={testPeriod:{startDate:"20160701",endDate:X[X.length-1]},testPeriod2:{startDate:"20170403",endDate:X[X.length-1]},testPeriod3:{startDate:"20161004",endDate:"20190516"},GAPS2019:{startDate:"20190603",endDate:X[X.length-1]},GAPS2018:{startDate:"20180601",endDate:"20181031"},GAPS2017:{startDate:"20170601",endDate:"20171031"},GAPS2016:{startDate:"20160601",endDate:"20161031"}},we=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e,t){var a=e[0].format(je),n=e[1].format(je);t.writeData({data:{globalVariables:{__typename:"GlobalVariables",startDate:a,endDate:n}}})},a.setPeriod=function(e,t){var a=xe[t],n=a.startDate,r=a.endDate;e.writeData({data:{globalVariables:{__typename:"GlobalVariables",startDate:n,endDate:r}}})},a.setStartDate=function(e){var t=X[0];e.writeData({data:{globalVariables:{__typename:"GlobalVariables",startDate:t}}})},a.setEndDate=function(e){var t=X[X.length-1];e.writeData({data:{globalVariables:{__typename:"GlobalVariables",endDate:t}}})},a.disabledDate=function(e){var t=e.format(je);return-1===X.indexOf(t)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.client,n=t.data.globalVariables,i=n.startDate,o=n.endDate;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{onChange:function(t){return e.onChange(t,a)},value:[U(i,je),U(o,je)],format:je,disabledDate:this.disabledDate}),r.a.createElement(Se.a,{type:"default",onClick:function(){return e.setPeriod(a,"testPeriod")}},"TestPeriod"),r.a.createElement(Se.a,{type:"default",onClick:function(){return e.setPeriod(a,"testPeriod2")}},"TestPeriod2"),r.a.createElement(Se.a,{type:"default",onClick:function(){return e.setPeriod(a,"testPeriod3")}},"TestPeriod3"),r.a.createElement(Se.a,{type:"default",onClick:function(){return e.setStartDate(a)}},"\ucd5c\ucd08\uc77c(",X[0],")"),r.a.createElement(Se.a,{type:"default",onClick:function(){return e.setEndDate(a)}},"\ucd5c\uc885\uc77c(",X[X.length-1],")"),r.a.createElement(Se.a,{type:"default",onClick:function(){return e.setPeriod(a,"GAPS2019")}},"GAPS 2019"),r.a.createElement(Se.a,{type:"default",onClick:function(){return e.setPeriod(a,"GAPS2018")}},"GAPS 2018"),r.a.createElement(Se.a,{type:"default",onClick:function(){return e.setPeriod(a,"GAPS2017")}},"GAPS 2017"),r.a.createElement(Se.a,{type:"default",onClick:function(){return e.setPeriod(a,"GAPS2016")}},"GAPS 2016"))}}]),t}(r.a.Component),We=a(188),Re=We.a.Option,Pe=Q,Me=J,_e=[],Ie=0;Ie<Pe.length;Ie++)_e.push(r.a.createElement(Re,{key:Pe[Ie]},Me[Ie]));var Te=function(e){return r.a.createElement(We.a,{mode:"multiple",style:{width:"100%"},placeholder:"Please select",defaultValue:e.data.globalVariables.codeList,onChange:function(t){return function(e,t){t.writeData({data:{globalVariables:{__typename:"GlobalVariables",codeList:e}}})}(t,e.client)}},_e)},Ve=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"chart"},r.a.createElement("h1",null,"PriceChart"),r.a.createElement(k.b,{query:F},function(e){e.loading,e.error;var t=e.data,a=e.client;return r.a.createElement("div",null,r.a.createElement(Te,{data:t,client:a}),r.a.createElement(Oe,{data:t}))}))}}]),t}(r.a.Component),Ne=a(119),Fe=new fe("20160101"),ze=function e(){Object(c.a)(this,e)};ze.getMomentum1=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3]){var n=Fe.getHistoricalPriceListFromDate(e,t,Number(a)+1),r=n[0];return(n[n.length-2]-r)/r}var i=Fe.getHistoricalPriceListFromDate(e,t,Number(a)),o=i[0];return(i[i.length-1]-o)/o},ze.getMomentum2=function(e,t){return(ze.getMomentum1(e,t,20)+ze.getMomentum1(e,t,60)+ze.getMomentum1(e,t,120))/3},ze.getMomentum3=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var a=ze.getMomentum1(e,t,20);return ze.getMomentum1(e,t,60)-a},ze.getMomentum4=function(e,t){var a=Fe.getHistoricalPriceListFromDate(e,t,241),n=[];[0,1,2,3,4,5,6,7,8,9,10,11,12].forEach(function(e){var t=a.length-1,r=a[t-20*e];n.push(r)});var r=n[0],i=n.slice(1,n.length).map(function(e){return r>e?1:0});return te.sum(i)/12},ze.getCorrEff=function(e,t){return ae.corrcoeff(e,t)},ze.getCorMatrix=function(e,t,a){for(var n=e.map(function(e){var n=Fe.getHistoricalReturnsFromDate(e,t,Number(a)+1);return n.pop(),n}),r=[],i=0;i<e.length;i++){var o={};o[""]=e[i];for(var l=0;l<e.length;l++){var c=ae.corrcoeff(n[i],n[l]);o[e[l]]=c.toString()}r.push(o)}return r.columns=[""].concat(e),r},ze.getCorScore=function(e,t,a){return ze.getCorMatrix(e,t,a).map(function(e){var t=e[""];delete e[""];var a=Object.keys(e).filter(function(e){return e!=t}).map(function(t){return e[t]});return te.sum(a)})},ze.getStd=function(e,t,a){var n=Fe.getHistoricalReturnsFromDate(e,t,a+1);return n.pop(),te.std(n)};var He=function(e){var t=e.allocation,a=e.backtest,n=e.portfolio,r=e.codeList,i=e.simulationArgs.momentumWindow;t.reset();var o=[];r.forEach(function(e,t){var n=ze.getMomentum1(e,a.date,i);o.push(n)});var l=r[o.indexOf(Math.max.apply(Math,o))];t.addWeight(l,100);var c=t.getAllocation();n.executeAllocation(c)},Ge=function(e){var t=e.allocation,a=e.backtest,n=e.portfolio,r=e.stockCodeList,i=e.simulationArgs,o=i.momentumWindow,l=i.top;t.reset();var c=[];r.forEach(function(e,t){var n=ze.getMomentum1(e,a.date,o);c.push(n)});var u=[];r.forEach(function(e,t){u.push({code:e,momentumScore:c[t]})}),u.sort(function(e,t){return t.momentumScore-e.momentumScore});var s=u.slice(0,l).map(function(e){return e.code}),d=100/l;s.forEach(function(e){return t.addWeight(e,d)});var h=t.getAllocation();n.executeAllocation(h)},Ke=function(e){var t=e.allocation,a=e.backtest,n=e.portfolio,r=e.stockCodeList,i=e.simulationArgs,o=i.selectedAsset,l=i.strategyArg1,c=o;t.reset();var u=[];r.forEach(function(e,t){var n=ze.getMomentum1(e,a.date,l);u.push(n)});var s=[];r.forEach(function(e,t){s.push({code:e,momentumScore:u[t]})});var d=s.filter(function(e){return e.momentumScore>0}).map(function(e){return e.code}),h=d.length,m=Math.floor(100/r.length),f=100-m*h;d.forEach(function(e){return t.addWeight(e,m)}),t.addWeight(c,f);var g=t.getAllocation();n.executeAllocation(g)},Ye=function(e){var t=e.allocation,a=e.backtest,n=e.portfolio,r=e.stockCodeList,i=e.simulationArgs.strategyArg1;t.reset();var o=[];r.forEach(function(e,t){var n=ze.getMomentum1(e,a.date,i);o.push(n)});var l=[];r.forEach(function(e,t){l.push({code:e,momentumScore:o[t]})}),l.sort(function(e,t){return t.momentumScore-e.momentumScore});var c=l.map(function(e){return e.code}),u=[30,25,20,15,10,0];c.forEach(function(e,a){return t.addWeight(e,u[a])});var s=t.getAllocation();n.executeAllocation(s)},Be=function(e){var t=e.allocation,a=e.backtest,n=e.portfolio,r=e.simulationArgs,i=e.stockCodeList,o=r.strategyArg1,l=r.strategyArg2;if(t.reset(),ze.getMomentum1("WORLD_STOCK",a.date,o)>0){var c=[];i.forEach(function(e,t){var n=ze.getMomentum1(e,a.date,o);c.push(n)});var u=[];i.forEach(function(e,t){u.push({code:e,momentumScore:c[t]})}),u.sort(function(e,t){return t.momentumScore-e.momentumScore});var s=u.slice(0,l).map(function(e){return e.code});if(1==l){var d=s[0];"069500"===d?(t.addWeight("069500",20),t.addWeight("143850",10)):"232080"===d?(t.addWeight("232080",20),t.addWeight("143850",10)):(t.addWeight("069500",10),t.addWeight(d,20))}else{if(2!=l)throw console.log(l),"invalid top arg";var h=s[0],m=s[1],f="069500"===h||"069500"===m,g="232080"===h||"232080"===m;f&&g?(t.addWeight("069500",20),t.addWeight("232080",20),t.addWeight("143850",10)):f||g?f?(t.addWeight("069500",20),"069500"===h?t.addWeight(m,20):t.addWeight(h,20)):(t.addWeight("232080",20),"232080"===h?t.addWeight(m,20):t.addWeight(h,20)):(t.addWeight(h,20),t.addWeight(m,20),t.addWeight("069500",10))}t.addWeight("132030",5);var v=null,p=[];t.getRemainsWeight()>60?p=[20,20,20]:(v=t.getRemainsWeight()/3,p=[v,v,v]),["148070","136340","182490"].forEach(function(e,a){t.addWeight(e,p[a])})}else{t.addWeight("069500",10),t.addWeight("143850",10);var y=[36,19,5];t.addWeight("132030",5),["148070","136340","182490"].forEach(function(e,a){t.addWeight(e,y[a])});var b=["114800","138230"],k=t.getRemainsWeight()/b.length;b.forEach(function(e){t.addWeight(e,k)})}t.allocateRemainsWeightToCash();var E=t.getAllocation();n.executeAllocation(E)},qe=1e10,Ue=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe;Object(c.a)(this,e),this.date=t,this.cash=a,this.assets={},this.log=[],this.market=new fe(t)}return Object(u.a)(e,[{key:"setDate",value:function(e){this.date=e,this.market.setDate(e)}},{key:"getCurrentAllocation",value:function(){var e=this,t=[],a=this.valuation();return this.getAssetsNames().map(function(n){var r=n,i=e.assets[n]*e.market.getPrice(r)/a*100;return t.push({code:r,weight:i}),null}),t.push({code:"cash",weight:this.cash/a*100}),t}},{key:"orderableAmount",value:function(e,t){return Math.floor(e/t)}},{key:"order",value:function(e,t){t>0?this.buy(e,t):this.sell(e,-t)}},{key:"buyValidation",value:function(e){return this.cash>e}},{key:"buy",value:function(e,t){var a=this.market.getPrice(e),n=a*t+a*t*0;if(this.buyValidation(n)){this.executeBuy(e,t,n);var r="date "+this.date+" buy "+e+" "+a+" "+t+" shares";this.log.push(r)}else console.log("reject buy order")}},{key:"executeBuy",value:function(e,t,a){this.cash-=a,void 0===this.assets[e]?this.assets[e]=t:this.assets[e]+=t}},{key:"sell",value:function(e,t){var a=this.market.getPrice(e,this.date),n=a*t-a*t*0-a*t*0;this.assets[e]-=t,this.cash+=n;var r="date "+this.date+" sell "+e+" "+a+" "+t+" shares";this.log.push(r)}},{key:"rebalance",value:function(e){}},{key:"executeAllocation",value:function(e){var t=this,a=[],n=0;if(e.map(function(e){var r=e.code,i=e.weight;if(n+=i,"cash"===r)return null;var o=null;if(0===i)o=0;else{var l=t.weightToValue(i),c=t.market.getPrice(r);o=t.orderableAmount(l,c)}var u={code:r,amount:o-(void 0===t.assets[r]?0:t.assets[r])};return a.push(u),null}),100!==Math.round(n))throw console.log(n),"total weight is not 100";var r=a.filter(function(e){return e.amount<0}),i=a.filter(function(e){return e.amount>0});r.map(function(e){return t.order(e.code,e.amount)}),i.map(function(e){return t.order(e.code,e.amount)})}},{key:"weightToValue",value:function(e){if(0===e)throw"weight can't be 0";return this.valuation()/100*e}},{key:"valuation",value:function(){var e=this,t=this.getAssetsNames(),a=this.cash;return t.map(function(t){var n=e.market.getPrice(t,e.date),r=e.assets[t];return a+=n*r,null}),a}},{key:"getAssetsNames",value:function(){return Object.keys(this.assets)}},{key:"print",value:function(){console.log(this.assets)}}]),e}(),Xe=function(e){var t=e.backtest,a=e.portfolio,n=t.date,r=a.valuation(),i="date: "+n+" NAV: "+r,o=a.getCurrentAllocation();t.dailyLog.push(i),t.navList.push(r),t.allocationList.push(o),t.dateList.push(n)},Qe=function(e){var t=e.backtest,a=t.date;return-1!==t.rebalanceDateList.indexOf(a)},Je=function(e,t){t(e)},Ze=function(){function e(){var t=this;Object(c.a)(this,e),this.afterMarket=function(){var e=t.portfolio.valuation(),a="date: "+t.date+" NAV: "+e,n=t.portfolio.getCurrentAllocation();t.dailyLog.push(a),t.navList.push(e),t.allocationList.push(n),t.dateList.push(t.date)},this.shouldTrade=function(){return-1!==t.rebalanceDateList.indexOf(t.date)},this.startDate=null,this.endDate=null,this.date=null,this.dateIndex=null,this.portfolio=null,this.rebalanceDateList=null,this.fixedAlloc=null,this.navList=null,this.returnList=null,this.orderLog=null,this.eventLog=null}return Object(u.a)(e,[{key:"init",value:function(e){var t=e.startDate,a=e.endDate,n=e.rebalanceDateList,r=e.allocation;this.startDate=t,this.endDate=a,this.date=t,this.dateIndex=X.indexOf(this.date),this.portfolio=new Ue(t),this.rebalanceDateList=n,this.fixedAlloc=r,this.navList=[],this.returnList=[],this.dateList=[],this.allocationList=[],this.orderLog=[],this.eventLog=[],this.dailyLog=[]}},{key:"result",value:function(){var e={};return e.navList=this.navList,e.returnList=this.returnList,e.cumReturnList=this.cumReturnList,e.allocationList=this.allocationList,e.dateList=this.dateList,e.orderLog=this.orderLog,e.eventLog=this.eventLog,e.finalReturn=this.getFinalReturn(),e.annualizedReturns=this.getAnnualizedReturns(),e.annualizedStd=this.getAnnualizedStd(),e.sharpeRatio=this.getSharpeRatio(),e.std=this.getStd(),e}},{key:"getFinalReturn",value:function(){var e=this.navList[0];return(this.navList[this.navList.length-1]-e)/e}},{key:"getAnnualizedReturns",value:function(){var e=this.getFinalReturn(),t=this.navList.length-1;return ie(e,t)}},{key:"getAnnualizedStd",value:function(){var e=this.getStd();return oe(e)}},{key:"getSharpeRatio",value:function(){return this.getAnnualizedReturns()/this.getAnnualizedStd()}},{key:"getStd",value:function(){var e=this.returnList.map(function(e){return e/100});return e.shift(),te.std(e)}},{key:"forwardDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.dateIndex+=e,this.dateIndex>=X.length)throw"dateIndex out of range";this.date=X[this.dateIndex],this.portfolio.setDate(this.date)}},{key:"fixedAllocation",value:function(e){this.allocation=e}},{key:"setRebalanceDateList",value:function(e){this.rebalanceDateList=e}},{key:"run",value:function(){var e={backtest:this,portfolio:this.portfolio};for(this.portfolio.executeAllocation(this.fixedAlloc);Qe(e)&&this.portfolio.executeAllocation(this.fixedAlloc),Xe(e),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"run2",value:function(e){var t=Q,a=new tt,n={backtest:this,portfolio:this.portfolio,allocation:a,codeList:t,simulationArgs:e};for(this.rebalanceDateList.push(this.date);Qe(n)&&Je(n,He),Xe(n),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"run3",value:function(e){this.rebalanceDateList.push(this.date);for(var t=Q,a=t.slice(0,6),n=new tt,r={backtest:this,portfolio:this.portfolio,allocation:n,codeList:t,stockCodeList:a,simulationArgs:e};this.shouldTrade()&&Je(r,Ge),this.afterMarket(),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"run4",value:function(e){this.rebalanceDateList.push(this.date);for(var t=Q,a=t.slice(0,6),n=new tt,r={backtest:this,portfolio:this.portfolio,allocation:n,codeList:t,stockCodeList:a,simulationArgs:e};this.shouldTrade()&&Je(r,Ke),this.afterMarket(),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"run5",value:function(e){this.rebalanceDateList.push(this.date);for(var t=Q,a=t.slice(0,6),n=new tt,r={backtest:this,portfolio:this.portfolio,allocation:n,codeList:t,stockCodeList:a,simulationArgs:e};this.shouldTrade()&&Je(r,Ye),this.afterMarket(),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"run6",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.rebalanceDateList.push(this.date);for(var a=Q.slice(0,6),n=new tt;this.shouldTrade()&&function(){n.reset();var r=[];a.forEach(function(t,a){var n=ze.getMomentum2(t,e.date);r.push(n)});var i=[];a.forEach(function(e,t){i.push({code:e,momentumScore:r[t]})}),i.sort(function(e,t){return t.momentumScore-e.momentumScore});var o=i.slice(0,t).map(function(e){return e.code}),l=100/t;o.forEach(function(e){n.addWeight(e,l)});var c=n.getAllocation();e.portfolio.executeAllocation(c)}(),this.afterMarket(),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"run7",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.rebalanceDateList.push(this.date);for(var n=Q.slice(0,6),r=new tt;this.shouldTrade()&&function(){r.reset();var i=[];n.forEach(function(a,n){var r=ze.getMomentum1(a,e.date,t);i.push(r)});var o=[];n.forEach(function(e,t){o.push({code:e,momentumScore:i[t]})});var l=o.filter(function(e){return e.momentumScore>a}).map(function(e){return e.code}),c=l.length,u=Math.floor(100/n.length),s=u*c,d=(100-s)/2,h=(100-s)/2;l.forEach(function(e){r.addWeight(e,u)}),r.add("182490",d),r.add("138230",h);var m=r.getAllocation();e.portfolio.executeAllocation(m)}(),this.afterMarket(),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"run8",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;this.rebalanceDateList.push(this.date);for(var n=Q;this.shouldTrade()&&function(){var r=[];n.forEach(function(t,n){var i=ze.getMomentum1(t,e.date,a);r.push(i)});var i=[];n.forEach(function(e,t){i.push({code:e,momentumScore:r[t]})}),i.sort(function(e,t){return t.momentumScore-e.momentumScore});var o=i.slice(0,t).map(function(e){return e.code}),l=100/t,c=[].concat(Object(C.a)(n),["cash"]).map(function(e){return-1!==o.indexOf(e)?{code:e,weight:l}:{code:e,weight:0}});e.portfolio.executeAllocation(c)}(),this.afterMarket(),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"run9",value:function(e,t){var a=this;this.rebalanceDateList.push(this.date);for(var n=Q;this.shouldTrade()&&function(){var r=ze.getMomentum1(t,a.date,e),i=void 0,o=void 0;r>0?(i=100,o=0):(i=0,o=100);var l=[].concat(Object(C.a)(n),["cash"]).map(function(e){return e===t?{code:e,weight:i}:"cash"===e?{code:e,weight:o}:{code:e,weight:0}});a.portfolio.executeAllocation(l)}(),this.afterMarket(),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"run10",value:function(e,t){var a=this;this.rebalanceDateList.push(this.date);for(var n=["069500","232080","143850","195930","238720","192090"],r=new tt;;){if(this.shouldTrade()){r.reset(),ze.getMomentum1("WORLD_STOCK",this.date,e)>0?function(){var i=[];n.forEach(function(t,n){var r=ze.getMomentum1(t,a.date,e);i.push(r)});var o=[];n.forEach(function(e,t){o.push({code:e,momentumScore:i[t]})}),o.sort(function(e,t){return t.momentumScore-e.momentumScore});var l=o.slice(0,t).map(function(e){return e.code});if(1==t){var c=l[0];"069500"===c?(r.addWeight("069500",20),r.addWeight("143850",10)):"232080"===c?(r.addWeight("232080",10),r.addWeight("143850",10)):(r.addWeight("069500",10),r.addWeight(c,20))}else{if(2!=t)throw console.log(t),"invalid top arg";var u=l[0],s=l[1],d="069500"===u||"069500"===s,h="232080"===u||"232080"===s;d&&h?(r.addWeight("069500",20),r.addWeight("232080",10),r.addWeight("143850",10)):d||h?(d?r.addWeight("069500",20):r.addWeight("232080",10),r.addWeight("143850",10)):(r.addWeight(u,20),r.addWeight(s,20))}r.addWeight("132030",5);var m=["136340","182490"],f=r.getRemainsWeight()/m.length;m.forEach(function(e){r.addWeight(e,f)})}():function(){r.addWeight("069500",10),r.addWeight("143850",10);var e=[20,20,20];["148070","136340","182490"].forEach(function(t,a){r.addWeight(t,e[a])});var t=["114800","138230"],a=r.getRemainsWeight()/t.length;t.forEach(function(e){r.addWeight(e,a)})}(),r.allocateRemainsWeightToCash();var i=r.getAllocation();this.portfolio.executeAllocation(i)}if(this.afterMarket(),this.date===this.endDate)break;this.forwardDate()}this.orderLog=this.portfolio.log}},{key:"run11",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;this.rebalanceDateList.push(this.date);for(var n=new tt,r=Q;this.shouldTrade()&&function(){n.reset();var i=[];r.forEach(function(t,n){var r=ze.getMomentum1(t,e.date,a);i.push({code:t,momentumScore:r})}),i.sort(function(e,t){return t.momentumScore-e.momentumScore});var o=i.filter(function(e){return e.momentumScore>0}).map(function(e){return e.code}).slice(0,t);o.forEach(function(e){n.addWeight(e,30)}),n.allocateRemainsWeightToCash();var l=n.getAllocation();e.portfolio.executeAllocation(l)}(),this.afterMarket(),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"run12",value:function(e,t){var a=this;this.rebalanceDateList.push(this.date);for(var n=["069500","232080","143850","195930","238720","192090"],r=new tt;;){if(this.shouldTrade()){r.reset(),r.addWeight("069500",10),r.addWeight("143850",10),r.addWeight("182490",5),r.addWeight("132030",5),ze.getMomentum1("WORLD_STOCK",this.date,e)>0?function(){var i=[];n.forEach(function(t,n){var r=ze.getMomentum1(t,a.date,e);i.push(r)});var o=[];n.forEach(function(e,t){o.push({code:e,momentumScore:i[t]})}),o.sort(function(e,t){return t.momentumScore-e.momentumScore}),o.slice(0,t).map(function(e){return e.code}).forEach(function(e){r.addWeight(e,20)});var l=["136340","182490"],c=r.getRemainsWeight()/l.length;l.forEach(function(e){r.addWeight(e,c)})}():function(){var e=["148070","136340","182490","114800","138230"],t=r.getRemainsWeight()/e.length;e.forEach(function(e){r.addWeight(e,t)})}(),r.allocateRemainsWeightToCash();var i=r.getAllocation();this.portfolio.executeAllocation(i)}if(this.afterMarket(),this.date===this.endDate)break;this.forwardDate()}this.orderLog=this.portfolio.log}},{key:"run13",value:function(e,t,a,n){var r=this;this.rebalanceDateList.push(this.date),a=Number(a);for(var i=["069500","232080","143850","195930","238720","192090"],o=new tt;;){if(this.shouldTrade()){o.reset(),ze.getMomentum1("WORLD_STOCK",this.date,e)>0?function(){var l=[];i.forEach(function(t,a){var n=ze.getMomentum1(t,r.date,e);l.push(n)});var c=[];i.forEach(function(e,t){c.push({code:e,momentumScore:l[t]})}),c.sort(function(e,t){return t.momentumScore-e.momentumScore});var u=c.slice(0,t).map(function(e){return e.code}),s=a/u.length;u.forEach(function(e){o.addWeight(e,s)}),o.addWeight(n,o.getRemainsWeight())}():o.addWeight(n,o.getRemainsWeight()),o.allocateRemainsWeightToCash();var l=o.getAllocation();this.portfolio.executeAllocation(l)}if(this.afterMarket(),this.date===this.endDate)break;this.forwardDate()}this.orderLog=this.portfolio.log}},{key:"run14",value:function(e){this.rebalanceDateList.push(this.date);for(var t={stockCodeList:["069500","232080","143850","195930","238720","192090"],allocation:new tt,simulationArgs:e,backtest:this,portfolio:this.portfolio};this.shouldTrade()&&Je(t,Be),this.afterMarket(),this.date!==this.endDate;)this.forwardDate();console.log("end date : ",t.backtest.date),console.log("next position : ",function(e,t){var a=e.allocation,n=e.simulationArgs,r=e.stockCodeList,i=n.strategyArg1,o=n.strategyArg2;if(a.reset(),ze.getMomentum1("WORLD_STOCK",t,i,!1)>0){var l=[];r.forEach(function(e,a){var n=ze.getMomentum1(e,t,i,!1);l.push(n)});var c=[];r.forEach(function(e,t){c.push({code:e,momentumScore:l[t]})}),c.sort(function(e,t){return t.momentumScore-e.momentumScore});var u=c.slice(0,o).map(function(e){return e.code});if(1==o){var s=u[0];"069500"===s?(a.addWeight("069500",20),a.addWeight("143850",10)):"232080"===s?(a.addWeight("232080",20),a.addWeight("143850",10)):(a.addWeight("069500",10),a.addWeight(s,20))}else{if(2!=o)throw console.log(o),"invalid top arg";var d=u[0],h=u[1],m="069500"===d||"069500"===h,f="232080"===d||"232080"===h;m&&f?(a.addWeight("069500",20),a.addWeight("232080",20),a.addWeight("143850",10)):m||f?m?(a.addWeight("069500",20),"069500"===d?a.addWeight(h,20):a.addWeight(d,20)):(a.addWeight("232080",20),"232080"===d?a.addWeight(h,20):a.addWeight(d,20)):(a.addWeight(d,20),a.addWeight(h,20),a.addWeight("069500",10))}a.addWeight("132030",5);var g=null,v=[];a.getRemainsWeight()>60?v=[20,20,20]:(g=a.getRemainsWeight()/3,v=[g,g,g]),["148070","136340","182490"].forEach(function(e,t){a.addWeight(e,v[t])})}else{a.addWeight("069500",10),a.addWeight("143850",10);var p=[36,19,5];a.addWeight("132030",5),["148070","136340","182490"].forEach(function(e,t){a.addWeight(e,p[t])});var y=["114800","138230"],b=a.getRemainsWeight()/y.length;y.forEach(function(e){a.addWeight(e,b)})}return a.allocateRemainsWeightToCash(),a.getAllocation().map(function(e){var t=Q.indexOf(e.code);return Object(A.a)({},e,{name:J[t]})})}(t,t.backtest.date)),this.orderLog=this.portfolio.log}},{key:"run15",value:function(e,t){var a=this;this.rebalanceDateList.push(this.date);for(var n=["069500","232080","143850","195930","238720","192090","148070","136340","182490"],r=new tt;this.shouldTrade()&&function(){r.reset();for(var i=n.map(function(t){return ze.getMomentum1(t,a.date,e)}),o=n.map(function(t){return ze.getStd(t,a.date,e)}),l=ze.getCorScore(n,a.date,e),c=le(i,!0),u=le(o,!1),s=le(l,!1),d=[],h=0;h<n.length;h++){var m=c[h]+2*u[h]+2*s[h];d.push(m)}var f=le(s,!1),g=n.map(function(e,t){return{code:e,rank:f[t]}});g.sort(function(e,t){return e.rank-t.rank});var v=g.slice(0,t).map(function(e){return e.code});v.forEach(function(t){ze.getMomentum1(t,a.date,e)>0&&r.addWeight(t,25)}),r.allocateRemainsWeightToCash();var p=r.getAllocation();a.portfolio.executeAllocation(p)}(),this.afterMarket(),this.date!==this.endDate;)this.forwardDate();this.orderLog=this.portfolio.log}},{key:"createMetaData",value:function(){var e=this;this.returnList=this.navList.map(function(t,a){if(0===a)return NaN;var n=e.navList[a-1];return(t-n)/n*100}),this.cumReturnList=this.navList.map(function(t,a){if(0===a)return 0;var n=e.navList[0];return(t-n)/n*100})}}]),e}(),$e=function(){function e(){Object(c.a)(this,e),this.argsObject={startDate:"20170216",endDate:"20181207",rebalanceDateList:[],allocation:[{code:"069500",weight:30},{code:"232080",weight:0},{code:"143850",weight:20},{code:"195930",weight:0},{code:"238720",weight:0},{code:"192090",weight:0},{code:"148070",weight:20},{code:"136340",weight:15},{code:"182490",weight:5},{code:"132030",weight:5},{code:"130680",weight:0},{code:"114800",weight:0},{code:"138230",weight:0},{code:"139660",weight:0},{code:"130730",weight:4},{code:"WORLD_STOCK",weight:0},{code:"cash",weight:1}]}}return Object(u.a)(e,[{key:"setDateRange",value:function(e,t){this.argsObject.startDate=e,this.argsObject.endDate=t}},{key:"setRebalanceDateList",value:function(e){this.argsObject.rebalanceDateList=e}},{key:"getArgs",value:function(){return this.argsObject}},{key:"replaceAllocation",value:function(e){this.argsObject.allocation=this.argsObject.allocation.map(function(t,a){return{code:t.code,weight:e[a]}})}}]),e}(),et={"069500":0,232080:0,143850:0,195930:0,238720:0,192090:0,148070:0,136340:0,182490:0,132030:0,130680:0,114800:0,138230:0,139660:0,130730:0,WORLD_STOCK:0,cash:0},tt=function e(){var t=this;Object(c.a)(this,e),this.addWeight=function(e,a){if(t.remainWeight<a)throw"not enough remainWeight ";t.allocation[e]+=a},this.getWeight=function(e){return t.allocation[e]},this.reset=function(){t.allocation=Object(A.a)({},et)},this.getRemainsWeight=function(){var e=Object.keys(t.allocation),a=0;return e.forEach(function(e){a+=t.allocation[e]}),100-a},this.allocateRemainsWeightToCash=function(){var e=t.getRemainsWeight();t.addWeight("cash",e)},this.getAllocation=function(){if(0!==t.getRemainsWeight())throw console.log(t.getRemainsWeight()),"remainsWeight !== 0";return Object.keys(t.allocation).map(function(e){return{code:e,weight:t.allocation[e]}})},this.allocation=Object(A.a)({},et)},at={one:1,two:2};console.log(at);at.one=2,console.log(at);var nt=a(95),rt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleGetElementAtEvent=function(e){var t=e,n=a.props.client;if(t[0]){var r=t[0],i=r._datasetIndex,o=r._index,l=r._chart.data.datasets[i].data[o];null!==l&&void 0!==l.labels&&n.writeData({data:{globalVariables:{__typename:"GlobalVariables",selectedAllocation:l.labels}}})}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.fixedAllocation.map(function(e){return{x:e.annualizedStd,y:e.annualizedReturns,code:e.code}}),t=this.props.data,a={labels:t.map(function(e){return e.labels.map(function(e){return parseInt(e)})}),datasets:[{label:"Fixed Allocation",data:e,backgroundColor:"rgb(0, 99, 132)"},{label:"Random Allocation",data:t,backgroundColor:"rgb(255, 99, 132)"}]};return r.a.createElement(nt.c,{data:a,options:{scales:{xAxes:[{type:"linear",position:"bottom",ticks:{min:0}}],yAxes:[{ticks:{min:-.2}}]},tooltips:{callbacks:{label:function(e,t){var a=e.index,n=null;return n=0===e.datasetIndex?t.datasets[0].data[a].code:t.labels[e.index],n+" : ("+e.xLabel+", "+e.yLabel+")"}}}},width:300,height:150,getElementAtEvent:this.handleGetElementAtEvent})}}]),t}(n.Component),it=a(1387),ot=[{title:"Code",dataIndex:"code",key:"code"},{title:"Name",dataIndex:"name",key:"name"},{title:"Returns(%)",dataIndex:"returns",key:"returns"},{title:"Std(%)",dataIndex:"std",key:"std"},{title:"AnnualizedReturns(%)",dataIndex:"annualizedReturns",key:"annualizedReturns"},{title:"AnnualizedStd(%)",dataIndex:"annualizedStd",key:"annualizedStd"}],lt=function(e){var t=e.data.map(function(e,t){var a=e.code,n=e.returns,r=e.std,i=e.annualizedReturns,o=e.annualizedStd;return n=te.round(n,4),r=te.round(r,4),i=te.round(i,4),o=te.round(o,4),{key:t,code:a,name:$(a),returns:(100*n).toFixed(2)+" %",std:(100*r).toFixed(2)+" %",annualizedReturns:(100*i).toFixed(2)+" %",annualizedStd:(100*o).toFixed(2)+" %"}});return r.a.createElement(it.a,{dataSource:t,columns:ot,size:"small"})},ct=new fe("20161207"),ut=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this._run(),r.a.createElement("div",{className:"chart__container"},r.a.createElement("canvas",{id:"cursor",width:"800",height:"450"}),r.a.createElement("canvas",{id:"line-chart",width:"800",height:"450"}))}},{key:"componentDidUpdate",value:function(){this.chartUpdate()}},{key:"chartUpdate",value:function(){var e=this.props.data.globalVariables,t=e.startDate,a=e.endDate,n=ct.getCumPctChangeInRange("232080",t,a).dateList,r=this._run(),i=be(),o={labels:n,datasets:[{backgroundColor:i,borderColor:i,data:r,fill:!1}]};this.chart.data=o,this.chart.update()}},{key:"_run",value:function(){var e=this.props.data.globalVariables,t=e.startDate,a=e.endDate,n=e.selectedAllocation;if(0!=n){var r=new $e;r.replaceAllocation(n),r.setDateRange(t,a);var i=r.getArgs(),o=new Ze;return o.init(i),o.run(),o.createMetaData(),function(e){var t=[],a=e[0];return e.map(function(e){var n=(e-a)/a*100;return t.push(n),null}),t}(o.result().navList)}}},{key:"componentDidMount",value:function(){for(var e=this.props.data.globalVariables,t=e.startDate,a=e.endDate,n=e.codeList,r=[],i=0;i<n.length;i++){var o=ct.getCumPctChangeInRange(n[i],t,a),l={};l.data=o,l.label=n[i],r.push(l)}var c=ct.getCumPctChangeInRange("232080",t,a).dateList;this._create_chart(r,c)}},{key:"_create_chart",value:function(){var e=this._run(),t=this.props.data.globalVariables,a=t.startDate,n=t.endDate,r=ct.getCumPctChangeInRange("232080",a,n).dateList,i=be(),o={type:"line",data:{labels:r,datasets:[{backgroundColor:i,borderColor:i,data:e,fill:!1}]},options:{animation:{duration:!1},responsive:!0,title:{display:!0,text:"Portfolio Returns"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},onHover:function(e){var t=ge("#cursor"),a=t.offset().left,n=t.get(0),r=parseInt(e.clientX-a),i=t.get(0).getContext("2d");i.clearRect(0,0,n.width,n.height),i.beginPath(),i.moveTo(r,0),i.lineTo(r,n.height),i.setLineDash([10,10]),i.strokeStyle="#333",i.stroke()},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Return(%)"}}]}}};this.chart=new pe.a(document.getElementById("line-chart"),o)}}]),t}(r.a.Component);J.push("\ud604\uae08");var st=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data.globalVariables.selectedAllocation,t={labels:J,datasets:[{data:e,backgroundColor:ye.b,hoverBackgroundColor:ye.b}]};return r.a.createElement(nt.a,{data:t,options:{animation:{animateScale:!0},legend:{position:"left"}},width:600,height:250})}}]),t}(r.a.Component),dt=a(1391),ht=(r.a.Component,function(e){var t=e.data,a=e.client,n=e.table,i=e.handleOnClick,o=e.handlePlayClick,l=e.handleResetClick,c=e.stopSimulation,u=e.stateData;return r.a.createElement("div",null,r.a.createElement("div",{className:"asset-allocation-page"},r.a.createElement(Te,{data:t,client:a}),n?r.a.createElement(lt,{data:n}):null,r.a.createElement(Se.a,{type:"primary",onClick:function(e){return i(e,t)}},"Run"),r.a.createElement(Se.a,{onClick:function(e){return o(e,t)}},"Play"),r.a.createElement(Se.a,{onClick:c},"Stop"),r.a.createElement(Se.a,{type:"danger",onClick:l},"Reset"),r.a.createElement(rt,{data:u,fixedAllocation:n,client:a}),r.a.createElement(ut,{data:t}),r.a.createElement(st,{data:t})))}),mt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).simulationOnce=a.simulationOnce.bind(Object(Ne.a)(a)),a.handleOnClick=a.handleOnClick.bind(Object(Ne.a)(a)),a.handleResetClick=a.handleResetClick.bind(Object(Ne.a)(a)),a.handlePlayClick=a.handlePlayClick.bind(Object(Ne.a)(a)),a.stopSimulation=a.stopSimulation.bind(Object(Ne.a)(a)),a.state={data:[],play:!1},a.tempData=[],a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(k.b,{query:F},function(t){t.loading,t.error;var a=t.data,n=t.client,i=a.globalVariables,o=function(e,t,a){var n=new fe(t),r=[];return e.forEach(function(e){var i={};i.code=e,n.setDate(t);var o=n.getPrice(e);n.setDate(a);var l=(n.getPrice(e)-o)/o;i.returns=l;var c=n.getReturnsListInRange(e,t,a).map(function(e){return e/100});c.shift();var u=c.length;i.annualizedReturns=ie(l,u);var s=te.std(c);i.std=s,i.annualizedStd=oe(s),r.push(i)}),r}(i.codeList,i.startDate,i.endDate);return r.a.createElement("div",null,r.a.createElement("div",{className:"asset-allocation-page"},r.a.createElement(ht,{data:a,client:n,table:o,handleOnClick:e.handleOnClick,handlePlayClick:e.handlePlayClick,stopSimulation:e.stopSimulation,handleResetClick:e.handleResetClick,stateData:e.state.data})))})}}]),Object(u.a)(t,[{key:"simulationOnce",value:function(e){var t=e.startDate,a=e.endDate,n=e.codeList,r=new Array(17).fill(0);n.forEach(function(e){var t=Q.indexOf(e);-1!==t&&(r[t]=null)});var i=function(e){var t=e.filter(function(e){return null===e}).length,a=100-te.sum(e.filter(function(e){return null!==e})),n=ne(t),r=te.sum(n);return n=te.multiply(n,a/r),e.map(function(e){return null!==e?e:n.shift()})}(r);i=i.map(function(e){return te.floor(e)});var o=100-te.sum(i);i[i.length-1]+=o;var l=new $e;l.replaceAllocation(i),l.setDateRange(t,a);var c=l.getArgs(),u=new Ze;u.init(c),u.run(),u.createMetaData();var s=u.result(),d={x:te.round(s.annualizedStd,4),y:te.round(s.annualizedReturns,4),labels:i,sharpeRatio:s.sharpeRatio};return this.tempData.push(d),d}},{key:"handlePlayClick",value:function(e,t){var a=this,n=t.globalVariables;this.setState({play:!0}),this.player=setInterval(function(){a.simulationLoopWithTimeLimit(n,100),a.setState({data:[].concat(Object(C.a)(a.state.data),Object(C.a)(a.tempData))}),a.tempData=[]},1)}},{key:"stopSimulation",value:function(){this.setState({play:!1}),clearInterval(this.player)}},{key:"simulationLoopWithTimeLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=Date.now();for(Date.now();this.simulationOnce(e),!(Date.now()-a>t););}},{key:"simulationLoopWithCountsLimit",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=0;a!==t;)this.simulationOnce(e),a++}},{key:"handleOnClick",value:function(e,t){var a=t.globalVariables;this.simulationLoopWithTimeLimit(a),this.setState({data:[].concat(Object(C.a)(this.state.data),Object(C.a)(this.tempData))}),this.tempData=[]}},{key:"handleResetClick",value:function(e){this.setState({data:[]})}}]),t}(n.Component),ft=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleGetElementAtEvent=function(e){var t=e;if(0!==t.length){var n=t[0],r=n._datasetIndex,i=n._index,o=n._chart,l=o.data.labels[i],c=o.data.datasets[r].label;a.props.selectPortfolio(c,l)}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){for(var e=this.props.data.globalVariables,t=e.startDate,a=e.endDate,n=this.props.resultList,i=this.props.isLogScale,o=[],l=0;l<n.length;l++){var c=null;c=i?n[l].result.navList.map(function(e){return e/1e8}):n[l].result.cumReturnList;var u={};u.data=c,u.label=n[l].name,o.push(u)}var s=se.getDateList(t,a),d=[];o.forEach(function(e,t){var a=t<10?ye.a[t]:be(),n={label:e.label,backgroundColor:a,borderColor:a,data:e.data.map(function(e){return te.round(e,2)}),fill:!1};d.push(n)});var h={labels:s,datasets:d},m=[100];d.forEach(function(e){return m.splice.apply(m,[0,0].concat(Object(C.a)(e.data)))});var f={responsive:!0,tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{type:"logarithmic",ticks:{min:te.floor(te.min(m)),max:te.ceil(te.max(m)),callback:function(e,t,a){return Number(e.toString())}},display:!0,scaleLabel:{display:!0,labelString:"Return(%)"}}]}};return r.a.createElement(r.a.Fragment,null,i?r.a.createElement(nt.b,{key:"1",data:h,options:f,getElementAtEvent:this.handleGetElementAtEvent}):r.a.createElement(nt.b,{key:"2",data:h,options:{responsive:!0,tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{type:"linear",display:!0,scaleLabel:{display:!0,labelString:"Return(%)"}}]}},getElementAtEvent:this.handleGetElementAtEvent}))}}]),t}(r.a.Component),gt=a(237),vt=a(325),pt=a(1388),yt=a(1390),bt=We.a.Option,kt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.props.handleChange(e)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(We.a,{defaultValue:this.props.preValue,style:{width:100},onChange:this.handleChange},r.a.createElement(bt,{value:"none"},"None"),r.a.createElement(bt,{value:"daily"},"Daily"),r.a.createElement(bt,{value:"weekly"},"Weekly"),r.a.createElement(bt,{value:"monthly"},"Monthly"))}}]),t}(r.a.Component),Et=We.a.Option,Ot=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.props.handleChange(e)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(We.a,{defaultValue:this.props.preValue,style:{width:150},onChange:this.handleChange},r.a.createElement(Et,{value:"none"},"None"),r.a.createElement(Et,{value:"momentum"},"Momentum"),r.a.createElement(Et,{value:"momentum2"},"Momentum2"),r.a.createElement(Et,{value:"momentum3"},"Momentum3"),r.a.createElement(Et,{value:"momentum4"},"Momentum4"),r.a.createElement(Et,{value:"momentum5"},"Momentum5"),r.a.createElement(Et,{value:"momentum6"},"Momentum6"),r.a.createElement(Et,{value:"momentum7"},"Momentum7"),r.a.createElement(Et,{value:"momentum8"},"Momentum8"),r.a.createElement(Et,{value:"momentum9"},"Momentum9"),r.a.createElement(Et,{value:"momentum10"},"Momentum10"),r.a.createElement(Et,{value:"momentum12"},"Momentum12"),r.a.createElement(Et,{value:"momentum13"},"Momentum13"),r.a.createElement(Et,{value:"momentum14"},"Momentum14"))}}]),t}(r.a.Component),Dt=We.a.Option,St=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.props.handleChange(e)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(We.a,{defaultValue:this.props.preValue,style:{width:70},onChange:this.handleChange},r.a.createElement(Dt,{value:"none"},"None"),r.a.createElement(Dt,{value:"1"},"1"),r.a.createElement(Dt,{value:"2"},"2"),r.a.createElement(Dt,{value:"3"},"3"),r.a.createElement(Dt,{value:"4"},"4"),r.a.createElement(Dt,{value:"5"},"5"),r.a.createElement(Dt,{value:"6"},"6"),r.a.createElement(Dt,{value:"7"},"7"),r.a.createElement(Dt,{value:"8"},"8"),r.a.createElement(Dt,{value:"9"},"9"),r.a.createElement(Dt,{value:"10"},"10"),r.a.createElement(Dt,{value:"20"},"20"),r.a.createElement(Dt,{value:"30"},"30"),r.a.createElement(Dt,{value:"40"},"40"),r.a.createElement(Dt,{value:"50"},"50"),r.a.createElement(Dt,{value:"60"},"60"),r.a.createElement(Dt,{value:"80"},"80"),r.a.createElement(Dt,{value:"100"},"100"),r.a.createElement(Dt,{value:"120"},"120"),r.a.createElement(Dt,{value:"240"},"240"))}}]),t}(r.a.Component),Lt=We.a.Option,At=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.props.handleChange(e)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(We.a,{defaultValue:this.props.preValue,style:{width:100},onChange:this.handleChange},r.a.createElement(Lt,{value:"none"},"None"),Q.map(function(e,t){return r.a.createElement(Lt,{key:e,value:e},Z[t])}))}}]),t}(r.a.Component),Ct=function(e){var t=e.batchSelection;return r.a.createElement(r.a.Fragment,null,r.a.createElement(kt,{handleChange:function(e){return t("rebalanceType",e)},preValue:"none"}),r.a.createElement(Ot,{handleChange:function(e){return t("strategyType",e)},preValue:"none"}),r.a.createElement(St,{handleChange:function(e){return t("strategyArg1",e)},preValue:"none"}),r.a.createElement(St,{handleChange:function(e){return t("strategyArg2",e)},preValue:"none"}),r.a.createElement(St,{handleChange:function(e){return t("strategyArg3",e)},preValue:"none"}),r.a.createElement(At,{handleChange:function(e){return t("selectedAsset",e)},preValue:"none"}))},jt=pt.a.Item,xt=r.a.createContext(),wt=pt.a.create()(function(e){var t=e.form,a=(e.index,Object(vt.a)(e,["form","index"]));return r.a.createElement(xt.Provider,{value:t},r.a.createElement("tr",a))}),Wt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={editing:!1},a.toggleEdit=function(){var e=!a.state.editing;a.setState({editing:e},function(){e&&a.input.focus()})},a.save=function(e){var t=a.props,n=t.record,r=t.handleSave;a.form.validateFields(function(t,i){t&&t[e.currentTarget.id]||(a.toggleEdit(),r(Object(A.a)({},n,i)))})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.editing,a=this.props,n=a.editable,i=a.dataIndex,o=a.title,l=a.record,c=(a.index,a.handleSave,Object(vt.a)(a,["editable","dataIndex","title","record","index","handleSave"]));return r.a.createElement("td",c,n?r.a.createElement(xt.Consumer,null,function(a){return e.form=a,t?r.a.createElement(jt,{style:{margin:0}},a.getFieldDecorator(i,{rules:[{required:!0,message:"".concat(o," is required.")}],initialValue:l[i]})(r.a.createElement(yt.a,{ref:function(t){return e.input=t},onPressEnter:e.save,onBlur:e.save}))):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:5},onClick:e.toggleEdit},c.children)}):c.children)}}]),t}(r.a.Component),Rt=function(e){function t(e){var a,n;Object(c.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).selectHandler=function(e,t,a){var r=n.state.dataSource;n.setState({dataSource:r.map(function(n){return t===n.key?Object(A.a)({},n,Object(gt.a)({},e,a)):n})})},n.handleRun=function(e){var t=Object(C.a)(n.state.dataSource).filter(function(t){return t.key===e}),a=[];Q.map(function(e){a.push(t[0][e])}),a.push(0);var r=t[0],i=r.name,o=r.rebalanceType,l=r.strategyType,c=r.strategyArg1,u=r.strategyArg2,s=r.strategyArg3,d=r.selectedAsset;n.props.runHandler(a,i,o,l,c,u,s,d)},n.handleDelete=function(e){var t=Object(C.a)(n.state.dataSource);n.setState({dataSource:t.filter(function(t){return t.key!==e})})},n.handleAdd=function(){var e=n.state,t=e.count,a=e.dataSource,r=a.length>=1?a[a.length-1]:{"069500":100,232080:0,143850:0,195930:0,238720:0,192090:0,148070:0,136340:0,182490:0,132030:0,130680:0,114800:0,138230:0,139660:0,130730:0,WORLD_STOCK:0,rebalanceType:"none",strategyType:"none",strategyArg1:"none",strategyArg2:"none",strategyArg3:"none",selectedAsset:"none"},i=Object(A.a)({},r,{key:t,name:"Port #".concat(t+1)});n.setState({dataSource:[].concat(Object(C.a)(a),[i]),count:t+1})},n.handleAddPortfolio=function(e){var t=n.state,a=t.count,r=t.dataSource,i={key:a,name:"","069500":0,232080:0,143850:0,195930:0,238720:0,192090:0,148070:0,136340:0,182490:0,132030:0,130680:0,114800:0,138230:0,139660:0,130730:0,WORLD_STOCK:0,rebalanceType:"none",strategyType:"none",strategyArg1:"none",strategyArg2:"none",strategyArg3:"none",selectedAsset:"none"};if("Permanent Portfolio"===e)i.name="Permanent Portfolio",i[143850]=25,i[182490]=25,i[132030]=25,i[130730]=25,i.rebalanceType="monthly";else if("50:50"===e)i.name="50:50",i[143850]=50,i[182490]=50,i.rebalanceType="monthly";else{if("Dual Momentum"!==e)throw console.log(e),"invalid portfolio type";i.name="Dual Momentum",i.rebalanceType="weekly",i.strategyType="momentum13",i.strategyArg1="80",i.strategyArg2="2"}n.setState({dataSource:[].concat(Object(C.a)(r),[i]),count:a+1})},n.handleSave=function(e){var t=Object(C.a)(n.state.dataSource),a=t.findIndex(function(t){return e.key===t.key}),r=t[a];t.splice(a,1,Object(A.a)({},r,e)),n.setState({dataSource:t})};var i=e.columns,o=e.dataSource,l=[{title:"Rebalancing",dataIndex:"rebalancing",render:function(e,t){return n.state.dataSource.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement(kt,{handleChange:function(e){return n.selectHandler("rebalanceType",t.key,e)},preValue:n.state.dataSource.filter(function(e){return e.key===t.key})[0]?n.state.dataSource.filter(function(e){return e.key===t.key})[0].rebalanceType:"none"})):null}},{title:"Strategy",dataIndex:"strategy",render:function(e,t){return n.state.dataSource.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot,{handleChange:function(e){return n.selectHandler("strategyType",t.key,e)},preValue:n.state.dataSource.filter(function(e){return e.key===t.key})[0]?n.state.dataSource.filter(function(e){return e.key===t.key})[0].strategyType:"none"})):null}},{title:"Arg1",dataIndex:"strategyArg1",render:function(e,t){return n.state.dataSource.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement(St,{handleChange:function(e){return n.selectHandler("strategyArg1",t.key,e)},preValue:n.state.dataSource.filter(function(e){return e.key===t.key})[0]?n.state.dataSource.filter(function(e){return e.key===t.key})[0].strategyArg1:"none"})):null}},{title:"Arg2",dataIndex:"strategyArg2",render:function(e,t){return n.state.dataSource.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement(St,{handleChange:function(e){return n.selectHandler("strategyArg2",t.key,e)},preValue:n.state.dataSource.filter(function(e){return e.key===t.key})[0]?n.state.dataSource.filter(function(e){return e.key===t.key})[0].strategyArg2:"none"})):null}},{title:"Arg3",dataIndex:"strategyArg3",render:function(e,t){return n.state.dataSource.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement(St,{handleChange:function(e){return n.selectHandler("strategyArg3",t.key,e)},preValue:n.state.dataSource.filter(function(e){return e.key===t.key})[0]?n.state.dataSource.filter(function(e){return e.key===t.key})[0].strategyArg3:"none"})):null}},{title:"Asset",dataIndex:"selectedAsset",render:function(e,t){return n.state.dataSource.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement(At,{handleChange:function(e){return n.selectHandler("selectedAsset",t.key,e)},preValue:n.state.dataSource.filter(function(e){return e.key===t.key})[0]?n.state.dataSource.filter(function(e){return e.key===t.key})[0].selectedAsset:"none"})):null}},{title:"operation",dataIndex:"operation",render:function(e,t){return n.state.dataSource.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return n.handleRun(t.key)}},"Run"),r.a.createElement("button",{onClick:function(){return n.handleDelete(t.key)}},"Delete")):null}}];return n.columns=i,(a=n.columns).splice.apply(a,[1,0].concat(l)),n.state=o,n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.dataSource.dataSource,a={body:{row:wt,cell:Wt}},n=this.columns.map(function(t){return t.editable?Object(A.a)({},t,{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t});return r.a.createElement("div",null,r.a.createElement(Se.a,{onClick:this.handleAdd,type:"primary",style:{marginBottom:16}},"Add a row"),r.a.createElement(Se.a,{onClick:function(){return e.handleAddPortfolio("Permanent Portfolio")},type:"primary",style:{marginBottom:16}},"Add Permanent Portfolio"),r.a.createElement(Se.a,{onClick:function(){return e.handleAddPortfolio("50:50")},type:"primary",style:{marginBottom:16}},"Add 50:50 Portfolio"),r.a.createElement(Se.a,{onClick:function(){return e.handleAddPortfolio("Dual Momentum")},type:"primary",style:{marginBottom:16}},"Dual Momentum"),r.a.createElement("br",null),r.a.createElement(Ct,{batchSelection:this.props.batchSelection}),r.a.createElement(it.a,{components:a,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,columns:n,size:"small"}))}},{key:"componentDidUpdate",value:function(){var e=this.props.rootComp,t=this.state,a=t.dataSource,n=t.count,r=e.state.dataSource,i=this.state;JSON.stringify(r)!==JSON.stringify(i)&&e.setState({dataSource:{dataSource:a,count:n}})}}]),t}(r.a.Component),Pt=[{title:"Name",dataIndex:"name",key:"name"},{title:"Start Date",dataIndex:"startDate",key:"startDate"},{title:"End Date",dataIndex:"endDate",key:"endDate"},{title:"Returns(%)",dataIndex:"returns",key:"returns"},{title:"Std(%)",dataIndex:"std",key:"std"},{title:"AnnualizedReturns(%)",dataIndex:"annualizedReturns",key:"annualizedReturns"},{title:"AnnualizedStd(%)",dataIndex:"annualizedStd",key:"annualizedStd"},{title:"MDD(%)",dataIndex:"maximumDrowDown",key:"maximumDrowDown"},{title:"SharpeRatio",dataIndex:"sharpeRatio",key:"sharpeRatio"}],Mt=function(e){var t=e.data.map(function(e,t){var a=e.result,n=e.name,r=a.finalReturn,i=a.std,o=a.annualizedReturns,l=a.annualizedStd,c=a.dateList,u=a.navList,s=c[0],d=c[c.length-1],h=te.round(r,4),m=function(e){var t=[0];return e.forEach(function(e,a){if(0===a)return null;t.push(Math.max(t[a-1],e))}),1-Math.min.apply(Math,Object(C.a)(te.dotDivide(e,t)))}(u);return i=te.round(i,4),o=te.round(o,4),l=te.round(l,4),{key:t,name:n,startDate:s,endDate:d,maximumDrowDown:"-"+(100*m).toFixed(2)+" %",returns:(100*h).toFixed(2)+" %",std:(100*i).toFixed(2)+" %",annualizedReturns:(100*o).toFixed(2)+" %",annualizedStd:(100*l).toFixed(2)+" %",sharpeRatio:te.round(o/l,2).toFixed(2)}});return r.a.createElement(it.a,{dataSource:t,columns:Pt,size:"small"})},_t=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.resultList,a=e.portInfo;if(null==a)return r.a.createElement(nt.a,{data:{}});var n=a.name,i=a.date,o=t.filter(function(e){return e.name===n})[0].result,l=o.dateList.indexOf(i),c=o.allocationList[l],u=[],s=[],d=[];if(void 0===c)return null;c.forEach(function(e,t){if(0!==e.weight){var a,n=(a=e.code,Q.indexOf(a)),r=ke[n];"cash"!==e.code?u.push(ee(e.code)):u.push("cash"),s.push(e.weight),d.push(r)}});var h={labels:u,datasets:[{data:s,backgroundColor:d,hoverBackgroundColor:d}]};return r.a.createElement(nt.a,{data:h,options:{legend:{position:"left"}}})}}]),t}(r.a.Component);function It(){var e=Object(l.a)(["\n  height: 100%;\n  width: 40%;\n"]);return It=function(){return e},e}function Tt(){var e=Object(l.a)(["\n  height: 100%;\n  width: 60%;\n"]);return Tt=function(){return e},e}function Vt(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n  width: 100%;\n"]);return Vt=function(){return e},e}function Nt(){var e=Object(l.a)(["\n  height: 100%;\n  width: 100%;\n"]);return Nt=function(){return e},e}function Ft(){var e=Object(l.a)(["\n  height: 100%;\n  width: 100%;\n"]);return Ft=function(){return e},e}function zt(){var e=Object(l.a)(["\n  height: 100%;\n  width: 100%;\n  min-width: 1500px;\n"]);return zt=function(){return e},e}var Ht=m.c.div(zt()),Gt=(m.c.div(Ft()),m.c.div(Nt())),Kt=m.c.div(Vt()),Yt=m.c.div(Tt()),Bt=m.c.div(It()),qt=function(e){var t=e.data,a=(e.client,e.columns),n=e.dataSource,i=e.func,o=e.resultList,l=e.selectedPortfolio,c=e.selectPortfolioHandler,u=e.refreshHandler,s=e.rootComp,d=(e.setLogScale,e.isLogScale),h=e.batchSelection,m=t.globalVariables,f=i.runSimulation;return r.a.createElement(Ht,null,r.a.createElement(Gt,null,r.a.createElement(Rt,{columns:a,dataSource:n,runHandler:function(e,t,a,n,r,i,o,l){return f(m,e,t,a,n,r,i,o,l)},rootComp:s,batchSelection:h}),r.a.createElement(Se.a,{type:"default",onClick:function(){return u(m)}},"Refresh")),r.a.createElement(Kt,null,r.a.createElement(Yt,null,r.a.createElement(ft,{data:t,resultList:o,selectPortfolio:c,isLogScale:d})),r.a.createElement(Bt,null,r.a.createElement(_t,{resultList:o,portInfo:l}))),r.a.createElement(Mt,{data:o}))},Ut=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).runSimulation=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"none",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"none",c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"none",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"none",s=e.startDate,d=e.endDate,h=t;h=h.map(function(e){return te.floor(e)});var m=100-te.sum(h);h[h.length-1]+=m;var f=new $e;f.replaceAllocation(h),f.setDateRange(s,d),"none"===r?f.setRebalanceDateList([]):"daily"===r?f.setRebalanceDateList(X):"weekly"===r?f.setRebalanceDateList(he):"monthly"===r&&f.setRebalanceDateList(de);var g=f.getArgs(),v=new Ze;v.init(g),Xt(v,{strategyType:i,strategyArg1:o,strategyArg2:l,strategyArg3:c,selectedAsset:u}),v.createMetaData();var p=v.result();console.log(p),a.setState({resultList:[].concat(Object(C.a)(a.state.resultList),[{result:p,name:n}])})},a.refreshSimulations=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"none",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"none",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"none",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"none",u=e.startDate,s=e.endDate,d=t;d=d.map(function(e){return te.floor(e)});var h=100-te.sum(d);d[d.length-1]+=h;var m=new $e;m.replaceAllocation(d),m.setDateRange(u,s),"none"===n?m.setRebalanceDateList([]):"daily"===n?m.setRebalanceDateList(X):"weekly"===n?m.setRebalanceDateList(he):"monthly"===n&&m.setRebalanceDateList(de);var f=m.getArgs(),g=new Ze;return g.init(f),Xt(g,{strategyType:r,strategyArg1:i,strategyArg2:o,strategyArg3:l,selectedAsset:c}),g.createMetaData(),{result:g.result(),name:a}},a.selectPortfolioHandler=function(e,t){a.setState({selectedPortfolio:{name:e,date:t}})},a.refreshHandler=function(e){for(var t=a.state.dataSource.dataSource,n=a.state.resultList.length,r=[],i=function(n){var i=t[n],o=[];Q.forEach(function(e){o.push(i[e])}),o.push(0);var l=i.name,c=i.rebalanceType,u=i.strategyType,s=i.strategyArg1,d=i.strategyArg2,h=i.strategyArg3,m=i.selectedAsset,f=a.refreshSimulations(e,o,l,c,u,s,d,h,m);r.push(f)},o=0;o<n;o++)i(o);a.setState({resultList:r})},a.setLogScale=function(){a.setState({logScale:!a.state.logScale})},a.batchSelection=function(e,t){var n=a.state.dataSource.dataSource.map(function(a){return a[e]=t,a});a.setState({dataSource:n})};var n=[{title:"name",dataIndex:"name",editable:!0}];Q.forEach(function(e){n.push({title:ee(e),dataIndex:e,editable:!0})}),a.columns=n;return a.state={dataSource:{dataSource:[],count:0},resultList:[],selectedPortfolio:null,logScale:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(k.b,{query:F},function(t){t.loading,t.error;var a=t.data,n=t.client;return r.a.createElement(qt,{rootComp:e,data:a,client:n,columns:e.columns,dataSource:e.state.dataSource,func:{runSimulation:e.runSimulation},resultList:e.state.resultList,selectPortfolioHandler:e.selectPortfolioHandler,selectedPortfolio:e.state.selectedPortfolio,refreshHandler:e.refreshHandler,setLogScale:e.setLogScale,isLogScale:e.state.logScale,batchSelection:e.batchSelection})})}}]),t}(n.Component),Xt=function(e,t){var a=t.strategyType,n=t.strategyArg1,r=t.strategyArg2,i=t.strategyArg3,o=t.selectedAsset;if("none"===a)e.run();else if("momentum"===a){var l={momentumWindow:n};e.run2(l)}else if("momentum2"===a){var c={top:n,momentumWindow:r};e.run3(c)}else if("momentum3"===a)e.run4(t);else if("momentum4"===a){e.run5(t)}else if("momentum5"===a){var u=n;e.run6(u)}else if("momentum6"===a){var s=n,d=r/100;e.run7(s,d)}else if("momentum7"===a){var h=n,m=r;e.run8(h,m)}else if("momentum8"===a){var f=n,g=o;e.run9(f,g)}else if("momentum9"===a){var v=n,p=r;e.run10(v,p)}else if("momentum10"===a){var y=n;e.run11(y)}else if("momentum11"===a){var b=n,k=r;e.run12(b,k)}else if("momentum12"===a){var E=n,O=r,D=i,S=o;e.run13(E,O,D,S)}else if("momentum13"===a)e.run14(t);else if("momentum14"===a){var L=n,A=r;e.run15(L,A)}},Qt=Ut,Jt=(a(1381),new fe),Zt=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(k.b,{query:F},function(e){var t=e.data,a=(e.client,t.globalVariables),n=a.startDate,i=a.endDate,o=$t(Q,n,i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ea,{corData:o}))})}}]),t}(r.a.Component),$t=function(e,t,a){for(var n=e.map(function(e){return Jt.getReturnsListInRange(e,t,a)}),r=[],i=0;i<e.length;i++){var o={};o[""]=e[i];for(var l=0;l<e.length;l++){var c=ae.corrcoeff(n[i],n[l]);o[e[l]]=c.toString()}r.push(o)}return r.columns=[""].concat(e),r},ea=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"matrix"})}},{key:"componentDidMount",value:function(){!function(e){var t=[];e.forEach(function(e){var a=e[""];for(var n in delete e[""],e){var r=n,i=e[n];t.push({x:ee(a),y:ee(r),value:+i})}});var a=25,n=80,r=25,i=25,o=800-i-n,l=800-a-r,c=q.g(t.map(function(e){return e.x})).values(),u=Math.sqrt(t.length),s=q.d().domain([-1,0,1]).range(["#B22222","#fff","#000080"]),d=q.e().range([0,o]).domain(c),h=q.e().range([0,l]).domain(c);d.range()[1],d.range()[0],h.range()[1],h.range()[0];h.range()[1],h.range()[0];var m=q.f("#matrix").append("svg").attr("width",o+i+n).attr("height",l+a+r).append("g").attr("transform","translate("+i+","+a+")"),f=m.selectAll(".cor").data(t).enter().append("g").attr("class","cor").attr("transform",function(e){return"translate("+d(e.x)+","+h(e.y)+")"});f.filter(function(e){for(var t=c.indexOf(e.y),a=c.indexOf(e.x),n=t+1;n<u;n++)if(n===a)return!1;return!0}).append("text").attr("y",5).text(function(e){return e.x===e.y?e.x:e.value.toFixed(2)}).style("font-size","11px").style("fill",function(e){return 1===e.value?"#000":s(e.value)}),f.filter(function(e){for(var t=c.indexOf(e.y),a=c.indexOf(e.x),n=t+1;n<u;n++)if(n===a)return!0;return!1}).append("circle").attr("r",function(e){return o/(2*u)*(Math.abs(e.value)+.1)}).style("fill",function(e){return 1===e.value?"#000":s(e.value)});var g=q.d().range([5-a,l+r-5]).domain([1,-1]),v=q.a().scale(g).tickPadding(7),p=m.append("g").attr("class","y axis").call(v).attr("transform","translate("+(o+n/2)+" ,0)"),y=q.c(-1,1.01,.01),b=l/y.length+3;y.forEach(function(e){p.append("rect").style("fill",s(e)).style("stroke-width",0).style("stoke","none").attr("height",b).attr("width",10).attr("x",0).attr("y",g(e))})}(this.props.corData)}},{key:"componentDidUpdate",value:function(){var e=[];this.props.corData.forEach(function(t){var a=t[""];for(var n in delete t[""],t){var r=n,i=t[n];e.push({x:a,y:r,value:+i})}}),console.log(this.props.corData)}}]),t}(r.a.Component),ta=Zt,aa=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(k.b,{query:F},function(e){e.loading,e.error;var t=e.data,a=e.client;return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{data:t,client:a}))})}}]),t}(n.Component);function na(){var e=Object(l.a)(["\n  height: 100%;\n  min-height: 100vh;\n  width: 100%;\n  background-color: ",";\n  color: ",";\n"]);return na=function(){return e},e}function ra(){var e=Object(l.a)(["\n  body {\n    padding: 0;\n    margin: 0;\n  }\n"]);return ra=function(){return e},e}var ia=[r.a.createElement(g.a,{exact:!0,activeClassName:"active",to:"/"},"Home"),r.a.createElement(g.a,{activeClassName:"active",to:"/price_chart"},"PriceChart"),r.a.createElement(g.a,{activeClassName:"active",to:"/asset-allocation"},"AssetAllocation"),r.a.createElement(g.a,{activeClassName:"active",to:"/correlation-matrix"},"CorrelationMatrix"),r.a.createElement(g.a,{activeClassName:"active",to:"/backtest"},"BackTest")],oa=r.a.createElement(v.a,null,r.a.createElement("div",null,r.a.createElement("ul",null,ia.map(function(e,t){return r.a.createElement("li",{key:t},e)})),r.a.createElement(aa,null),r.a.createElement(p.a,null,r.a.createElement(y.a,{exact:!0,path:"/",component:la}),r.a.createElement(y.a,{path:"/price_chart",component:Ve}),r.a.createElement(y.a,{path:"/asset-allocation",component:mt}),r.a.createElement(y.a,{path:"/backtest",component:Qt}),r.a.createElement(y.a,{path:"/correlation-matrix",component:ta}),r.a.createElement(y.a,{component:b})))),la=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ca,null),r.a.createElement(m.a,{theme:f},r.a.createElement(ua,{theme:f},r.a.createElement(k.a,{client:B},oa))))}}]),t}(n.Component),ca=Object(m.b)(ra()),ua=m.c.div(na(),function(e){return e.theme.mainColor},function(e){return e.theme.textColor}),sa=la;o.a.render(r.a.createElement(sa,null),document.getElementById("root"))},497:function(e,t,a){e.exports=a(1383)},508:function(e,t,a){}},[[497,1,2]]]);
//# sourceMappingURL=main.198846b8.chunk.js.map